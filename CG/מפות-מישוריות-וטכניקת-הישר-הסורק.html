<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>פרק 2 מפות מישוריות וטכניקת הישר הסורק | גאומטריה חישובית</title>
<meta name="author" content="עומרית פילצר">
<meta name="description" content="2.1 הקדמה  2.1.1 שכבות מידע במפה  ביחידה זו נתייחס לבעיות הנוגעות לחיתוכי קטעים במישור. דוגמה אחת לבעיה כזו מופיעה בתחום של מערכות מידע גאוגרפיות (GIS - Graphic Information Systems), כאשר רוצים...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="פרק 2 מפות מישוריות וטכניקת הישר הסורק | גאומטריה חישובית">
<meta property="og:type" content="book">
<meta property="og:url" content="https://omrit.filtser.com/CG/מפות-מישוריות-וטכניקת-הישר-הסורק.html">
<meta property="og:description" content="2.1 הקדמה  2.1.1 שכבות מידע במפה  ביחידה זו נתייחס לבעיות הנוגעות לחיתוכי קטעים במישור. דוגמה אחת לבעיה כזו מופיעה בתחום של מערכות מידע גאוגרפיות (GIS - Graphic Information Systems), כאשר רוצים...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="פרק 2 מפות מישוריות וטכניקת הישר הסורק | גאומטריה חישובית">
<meta name="twitter:description" content="2.1 הקדמה  2.1.1 שכבות מידע במפה  ביחידה זו נתייחס לבעיות הנוגעות לחיתוכי קטעים במישור. דוגמה אחת לבעיה כזו מופיעה בתחום של מערכות מידע גאוגרפיות (GIS - Graphic Information Systems), כאשר רוצים...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script>
        $(function() {
            $("#toc h2").html("בפרק זה:");
        });
    </script><script>
        $(function() {
            $("#main-nav h2").html("רשימת הפרקים:");
        });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">גאומטריה חישובית</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">שלום וברוכים הבאים לקורס בגאומטריה חישובית!</a></li>
<li><a class="" href="%D7%9E%D7%91%D7%95%D7%90.html"><span class="header-section-number">1</span> מבוא</a></li>
<li><a class="active" href="%D7%9E%D7%A4%D7%95%D7%AA-%D7%9E%D7%99%D7%A9%D7%95%D7%A8%D7%99%D7%95%D7%AA-%D7%95%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7.html"><span class="header-section-number">2</span> מפות מישוריות וטכניקת הישר הסורק</a></li>
<li><a class="" href="%D7%A9%D7%99%D7%9C%D7%95%D7%A9%D7%99-%D7%A4%D7%95%D7%9C%D7%99%D7%92%D7%95%D7%A0%D7%99%D7%9D-%D7%95%D7%91%D7%A2%D7%99%D7%99%D7%AA-%D7%94%D7%92%D7%9C%D7%A8%D7%99%D7%94-%D7%9C%D7%90%D7%9E%D7%A0%D7%95%D7%AA.html"><span class="header-section-number">3</span> שילושי פוליגונים ובעיית הגלריה לאמנות</a></li>
<li><a class="" href="footnotes-and-citations.html"><span class="header-section-number">4</span> Footnotes and citations</a></li>
<li><a class="" href="blocks.html"><span class="header-section-number">5</span> Blocks</a></li>
<li><a class="" href="cross.html"><span class="header-section-number">6</span> Cross-references</a></li>
<li><a class="" href="sharing-your-book.html"><span class="header-section-number">7</span> Sharing your book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="מפות-מישוריות-וטכניקת-הישר-הסורק" class="section level1" number="2">
<h1>
<span class="header-section-number">פרק 2</span> מפות מישוריות וטכניקת הישר הסורק<a class="anchor" aria-label="anchor" href="#%D7%9E%D7%A4%D7%95%D7%AA-%D7%9E%D7%99%D7%A9%D7%95%D7%A8%D7%99%D7%95%D7%AA-%D7%95%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7"><i class="fas fa-link"></i></a>
</h1>
<div id="הקדמה-1" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> הקדמה<a class="anchor" aria-label="anchor" href="#%D7%94%D7%A7%D7%93%D7%9E%D7%94-1"><i class="fas fa-link"></i></a>
</h2>
<div id="שכבות-מידע-במפה" class="section level3" number="2.1.1">
<h3>
<span class="header-section-number">2.1.1</span> שכבות מידע במפה<a class="anchor" aria-label="anchor" href="#%D7%A9%D7%9B%D7%91%D7%95%D7%AA-%D7%9E%D7%99%D7%93%D7%A2-%D7%91%D7%9E%D7%A4%D7%94"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure">
<img src="images/2/gis_map_overlay.jpg" align="left" width="33%">
ביחידה זו נתייחס לבעיות הנוגעות לחיתוכי קטעים במישור. דוגמה אחת לבעיה
כזו מופיעה בתחום של מערכות מידע גאוגרפיות (GIS - Graphic Information
Systems), כאשר רוצים להציג ולנתח שכבות מידע ממספר מפות. למשל, בהינתן מפה
של נהרות ומפה של כבישים, נוכל להצליב את המידע משתי המפות על מנת למצוא
היכן ממוקמים גשרים: אלו הן נקודות החיתוך בין כבישים לנהרות. כל מפה
נושאית כזו ניתנת לייצוג גאומטרי על ידי אוסף של קטעים, עקומים, או
פוליגונים. בעזרת טכניקות גאומטריות, נוכל למצוא את נקודות החיתוך ולחשב את
הייצוג המאוחד של שתי מפות (map overlay).</div>
<p>תחילה נראה כיצד ניתן למצוא את כל החיתוכים באוסף קטעים נתון, ולשם כך
נשתמש בטכניקה חשובה שימושית מאוד: טכניקת הישר הסורק (sweep-line). לאחר
מכן נדבר על ייצוג של מפות מישוריות (גרפים מישוריים), ונתאר מבנה נתונים
יעיל לאחסונם - DCEL. לבסוף, נראה כיצד ניתן לאחד שני מבנים כאלה, המייצגים
שתי מפות מישוריות, למפה מישורית אחת המאגדת את כל המידע.</p>
<div id="קראו-את-ההקדמה-לפרק-2-עמודים-1920." class="section level4 unnumbered">
<h4>קראו את ההקדמה לפרק 2 (עמודים 19–20).<a class="anchor" aria-label="anchor" href="#%D7%A7%D7%A8%D7%90%D7%95-%D7%90%D7%AA-%D7%94%D7%94%D7%A7%D7%93%D7%9E%D7%94-%D7%9C%D7%A4%D7%A8%D7%A7-2-%D7%A2%D7%9E%D7%95%D7%93%D7%99%D7%9D-1920."><i class="fas fa-link"></i></a>
</h4>
<hr class="mt-5 mb-5">
</div>
</div>
</div>
<div id="טכניקת-הישר-הסורק" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> טכניקת הישר הסורק<a class="anchor" aria-label="anchor" href="#%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7"><i class="fas fa-link"></i></a>
</h2>
<div id="חיתוך-קטעים-במישור" class="section level3" number="2.2.1">
<h3>
<span class="header-section-number">2.2.1</span> חיתוך קטעים במישור<a class="anchor" aria-label="anchor" href="#%D7%97%D7%99%D7%AA%D7%95%D7%9A-%D7%A7%D7%98%D7%A2%D7%99%D7%9D-%D7%91%D7%9E%D7%99%D7%A9%D7%95%D7%A8"><i class="fas fa-link"></i></a>
</h3>
<p>טכניקת הישר הסורק (sweep-line) היא חשובה ושימושית מאוד בגאומטריה
חישובית. כדי להדגים את השימוש בטכניקה הזו, ולפני שנדבר על מפות מישוריות,
נציג בעיה פשוטה לכאורה שנקראת בעיית חיתוך קטעים במישור (line segment
intersection). בבעיה זו, הקלט הוא אוסף של קטעים במישור, והמטרה היא למצוא
את כל נקודות החיתוך בין קטעים. בסרטון הבא נתאר את רעיון השימוש בישר
הסורק עבור בעיית חיתוך קטעים במישור.</p>
<div id="צפו-בסרטון-הבא-1" class="section level4 unnumbered">
<h4>צפו בסרטון הבא:<a class="anchor" aria-label="anchor" href="#%D7%A6%D7%A4%D7%95-%D7%91%D7%A1%D7%A8%D7%98%D7%95%D7%9F-%D7%94%D7%91%D7%90-1"><i class="fas fa-link"></i></a>
</h4>
<p align="center" width="100%">
<iframe width="560" height="315" src="https://www.youtube.com/embed/x1BxalWtFqk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
</p>
<p>בטכניקת הישר הסורק, הרעיון הוא “לסרוק” את הקטעים בעזרת ישר אופקי <span class="math inline">\(\ell\)</span>
הנע מלעלה למטה. ה”<strong>סטטוס</strong>” (status) של הישר הוא אוסף הקטעים הנחתכים עם
הישר במיקומו הנוכחי. את הסטטוס יש לעדכן בזמן שהישר נע מטה, אך הוא אינו
מתעדכן באופן רציף - העדכון מתבצע רק כאשר הישר מגיע לנקודות מסויימות, להן
אנו קוראים “<strong>מאורעות</strong>” (event points). בבעיית חיתוך הקטעים, המאורעות
הם נקודות הקצה של הקטעים, וגם נקודות החיתוך עצמן, שמתגלות במהלך
האלגוריתם. בכל פעם שהישר מגיע למאורע, יש לעדכן את הסטטוס ואת תור
המאורעות, ולבצע בדיקות של חיתוכים בין הקטעים בסטטוס.</p>
<div class="rmdwarning">
<p><img src="images/question.png" align="right" width="10%" style="padding:0px 0px 0px 10px">
זמן הריצה של האלגוריתם הראשון שמתואר בסרטון ומשתמש בשיטת הישר הסורק, הוא
<span class="math inline">\(O(n^2)\)</span>. האם קיים אוסף של קטעים ללא נקודות חיתוך כלל, שעבורו זמן הריצה
של האלגוריתם הזה יהיה <span class="math inline">\(\Theta(n^2)\)</span>?</p>
<details><summary>
(פתרון)
</summary><p>באוסף הקטעים שבאיור למטה אין נקודות חיתוך, אך בשלב שבו הקטע ה- <span class="math inline">\(i\)</span> נוסף
לסטטוס, כבר מופיעים בסטטוס <span class="math inline">\(i-1\)</span> הקטעים הראשונים, ולכן יהיו <span class="math inline">\(i-1\)</span>
בדיקות. סך הכל מספר הבדיקות בכל השלבים יהיה <span class="math inline">\(\Theta(n^2)\)</span>.</p>
<p align="center" width="100%">
</p>
<div class="inline-figure"><img src="images/2/worst-case-question.jpg" width="50%"></div>

</details>
</div>
</div>
</div>
<div id="טכניקת-הישר-הסורק---מימוש" class="section level3" number="2.2.2">
<h3>
<span class="header-section-number">2.2.2</span> טכניקת הישר הסורק - מימוש<a class="anchor" aria-label="anchor" href="#%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7---%D7%9E%D7%99%D7%9E%D7%95%D7%A9"><i class="fas fa-link"></i></a>
</h3>
<p>בסעיף הקודם ראינו סקיצה של אלגוריתם המשתמש בטכניקת הישר הסורק, והסברנו
באופן אינטואיטיבי מדוע גישה כזו תתן לנו אלגוריתם יעיל שהוא רגיש לפלט,
ושאינו בודק חיתוכים בין כל זוג קטעים.</p>
<p>כיצד מממשים אלגוריתם כזה ביעילות? בסעיף 2.1 בספר הלימוד מתואר בפירוט
האלגוריתם FindIntersections, מבני הנתונים להם נזדקק עבור תור המאורעות
והסטטוס, והפרוצדורה HandleEvenPoint לטיפול במאורעות. זמן הריצה של
האלגוריתם הוא <span class="math inline">\(O((n+k)\log n)\)</span>, כאשר <span class="math inline">\(k\)</span> הוא מספר נקודות החיתוך.</p>
<div id="קראו-בעיון-את-סעיף-2.1-בספר-הלימוד-עמודים-2029" class="section level4 unnumbered">
<h4>קראו בעיון את סעיף 2.1 בספר הלימוד (עמודים 20–29)<a class="anchor" aria-label="anchor" href="#%D7%A7%D7%A8%D7%90%D7%95-%D7%91%D7%A2%D7%99%D7%95%D7%9F-%D7%90%D7%AA-%D7%A1%D7%A2%D7%99%D7%A3-2.1-%D7%91%D7%A1%D7%A4%D7%A8-%D7%94%D7%9C%D7%99%D7%9E%D7%95%D7%93-%D7%A2%D7%9E%D7%95%D7%93%D7%99%D7%9D-2029"><i class="fas fa-link"></i></a>
</h4>
</div>
<div id="נוסחת-אוילר" class="section level4 unnumbered">
<h4>נוסחת אוילר<a class="anchor" aria-label="anchor" href="#%D7%A0%D7%95%D7%A1%D7%97%D7%AA-%D7%90%D7%95%D7%99%D7%9C%D7%A8"><i class="fas fa-link"></i></a>
</h4>
<p>בסעיף 2.1 בספר הלימוד, יש שימוש בנוסחת אוילר להשגת חסם על מספר המאורעות.</p>
<p>עבור גרף מישורי עם <span class="math inline">\(n_v\)</span> קודקודים, <span class="math inline">\(n_e\)</span> צלעות, ו-<span class="math inline">\(n_f\)</span> פאות, נוסחת
אוילר מתארת את הקשר ביניהם, באופן הבא.</p>
<div class="rmdimportant">
<p><strong>נוסחת אוילר</strong>: <span class="math inline">\(n_v-n_e+n_f\ge 2\)</span>.</p>
</div>
<p>זוהי נוסחה חשובה ביותר, ונעשה בה שימוש גם בהמשך הקורס.</p>
<div class="rmdwarning">
<div class="inline-figure">
<img src="images/question.png" align="right" width="10%" style="padding:0px 0px 0px 10px">
נסו לחשוב על אלגוריתם המקבל אוסף של קטעים במישור, ובודק האם קיים זוג
קטעים שנחתכים. איזה זמן ריצה ניתן להשיג?</div>
<details><summary>
(פתרון)
</summary>
שימו לב שניתן להשתמש באותו אלגוריתם שראינו למציאת כל נקודות החיתוך, אך לעצור מייד עם מציאת נקודת החיתוך הראשונה.
נקבל זמן ריצה של <span class="math inline">\(O(n\log n)\)</span>.
</details>
</div>
</div>
</div>
<div id="כיצד-נבדוק-האם-זוג-קטעים-נחתכים" class="section level3" number="2.2.3">
<h3>
<span class="header-section-number">2.2.3</span> כיצד נבדוק האם זוג קטעים נחתכים?<a class="anchor" aria-label="anchor" href="#%D7%9B%D7%99%D7%A6%D7%93-%D7%A0%D7%91%D7%93%D7%95%D7%A7-%D7%94%D7%90%D7%9D-%D7%96%D7%95%D7%92-%D7%A7%D7%98%D7%A2%D7%99%D7%9D-%D7%A0%D7%97%D7%AA%D7%9B%D7%99%D7%9D"><i class="fas fa-link"></i></a>
</h3>
<p>במהלך האלגוריתם הסורק שראינו קודם, אנו נדרשים למצוא את נקודת החיתוך בין
שני קטעים נתונים. בהינתן שני קטעים, <span class="math inline">\(S=\overline{pq}\)</span> ו-
<span class="math inline">\(S'=\overline{p'q'}\)</span>, כיצד נבדוק האם הם נחתכים?</p>
<p align="center" width="100%">
</p>
<div class="inline-figure"><img src="images/2/segments.jpg" width="80%"></div>

<div id="גישה-ראשונה-חישוב-הישרים-המכילים-את-הקטעים" class="section level4 unnumbered">
<h4>גישה ראשונה: חישוב הישרים המכילים את הקטעים<a class="anchor" aria-label="anchor" href="#%D7%92%D7%99%D7%A9%D7%94-%D7%A8%D7%90%D7%A9%D7%95%D7%A0%D7%94-%D7%97%D7%99%D7%A9%D7%95%D7%91-%D7%94%D7%99%D7%A9%D7%A8%D7%99%D7%9D-%D7%94%D7%9E%D7%9B%D7%99%D7%9C%D7%99%D7%9D-%D7%90%D7%AA-%D7%94%D7%A7%D7%98%D7%A2%D7%99%D7%9D"><i class="fas fa-link"></i></a>
</h4>
<p>ישר המכיל קטע.נחשב את הישר <span class="math inline">\(\ell\)</span> המכיל את הקטע <span class="math inline">\(S\)</span>, ואת הישר <span class="math inline">\(\ell'\)</span>
המכיל את הקטע <span class="math inline">\(S'\)</span>. נחשב את נקודת החיתוך <span class="math inline">\(t\)</span> בין הישרים <span class="math inline">\(\ell\)</span>
ו-<span class="math inline">\(\ell'\)</span>. נבדוק האם <span class="math inline">\(t\)</span> שייכת לשני הקטעים <span class="math inline">\(S\)</span> ו-<span class="math inline">\(S'\)</span>. בשיטה זו אנו
מוצאים את נקודת החיתוך, אם היא קיימת.</p>
</div>
<div id="מציאת-הישר-המכיל-קטע" class="section level4 unnumbered">
<h4>מציאת הישר המכיל קטע:<a class="anchor" aria-label="anchor" href="#%D7%9E%D7%A6%D7%99%D7%90%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%9E%D7%9B%D7%99%D7%9C-%D7%A7%D7%98%D7%A2"><i class="fas fa-link"></i></a>
</h4>
<p>מציבים את שתי נקודות הקצה של הקטע במשוואת הישר <span class="math inline">\(y=m x + c\)</span>, ולאחר מכן
פותרים מערכת של שתי משוואות כדי למצוא את <span class="math inline">\(m\)</span>.</p>
<p>למשל, עבור הקטע <span class="math inline">\(\overline{pq}\)</span> נסמן <span class="math inline">\(p=(p_x,p_y)\)</span>, <span class="math inline">\(q=(q_x,q_y)\)</span>, ונקבל
<span class="math inline">\(m=\frac{q_y-p_y}{q_x-p_x}\)</span>.</p>
<p>לאחר מכן, מוצאים את <span class="math inline">\(c\)</span> על ידי הצבה של אחת מהנקודות במשוואה.</p>
<p>שימו לב שאם הקטע <span class="math inline">\(\overline{p q}\)</span> הוא אנכי, אז המכנה של <span class="math inline">\(m\)</span> מתאפס.</p>
</div>
<div id="מציאת-נקודת-החיתוך-בין-שני-ישרים" class="section level4 unnumbered">
<h4>מציאת נקודת החיתוך בין שני ישרים:<a class="anchor" aria-label="anchor" href="#%D7%9E%D7%A6%D7%99%D7%90%D7%AA-%D7%A0%D7%A7%D7%95%D7%93%D7%AA-%D7%94%D7%97%D7%99%D7%AA%D7%95%D7%9A-%D7%91%D7%99%D7%9F-%D7%A9%D7%A0%D7%99-%D7%99%D7%A9%D7%A8%D7%99%D7%9D"><i class="fas fa-link"></i></a>
</h4>
<p>בהינתן שני ישרים לא אנכיים,<span class="math inline">\(\ell: y= m x + c\)</span> ו-<span class="math inline">\(\ell': y= m'x+ c'\)</span>,
נציב את נקודת החיתוך <span class="math inline">\(t=(t_x,t_y)\)</span> בשתי המשוואות. נפתור ונקבל:
<span class="math inline">\(t_x=\frac{c-c'}{m'-m}\)</span>, <span class="math inline">\(t_y=\frac{cm'-c'm}{m'-m}\)</span>.</p>
<p>גם כאן נשים לב שהמכנה מתאפס אם הישרים אנכיים או מקבילים.</p>
</div>
<div id="בדיקה-האם-נקודת-החיתוך-שייכת-לקטע" class="section level4 unnumbered">
<h4>בדיקה האם נקודת החיתוך שייכת לקטע:<a class="anchor" aria-label="anchor" href="#%D7%91%D7%93%D7%99%D7%A7%D7%94-%D7%94%D7%90%D7%9D-%D7%A0%D7%A7%D7%95%D7%93%D7%AA-%D7%94%D7%97%D7%99%D7%AA%D7%95%D7%9A-%D7%A9%D7%99%D7%99%D7%9B%D7%AA-%D7%9C%D7%A7%D7%98%D7%A2"><i class="fas fa-link"></i></a>
</h4>
<p>נניח שמתקיים <span class="math inline">\(p_x\le q_x\)</span>, <span class="math inline">\(p_y\le q_y\)</span>. אז נקודת החיתוך <span class="math inline">\(t\)</span> שייכת לקטע
<span class="math inline">\(\overline{p q}\)</span> אם <span class="math inline">\(t_x\in [p_x, q_y]\)</span>, <span class="math inline">\(t_y\in[p_y, q_y]\)</span>.</p>
<div class="rmdwarning">
<div class="inline-figure">
<img src="images/question.png" align="right" width="10%" style="padding:0px 0px 0px 10px">
בשלב השלישי, האם מספיק לבדוק שנקודת החיתוך שייכת לאחד הקטעים?</div>
<details><summary>
(פתרון)
</summary><p>בדוגמה המופיעה כאן, הקטעים אינם נחתכים, אך נקודת החיתוך בין הישרים
המכילים אותם מופיעה על אחד הקטעים.</p>
<p align="center" width="100%">
</p>
<div class="inline-figure"><img src="images/2/line_intersection.jpg" width="50%"></div>

</details>
</div>
</div>
<div id="כיצד-מטפלים-במקרים-מיוחדים" class="section level4 unnumbered">
<h4>כיצד מטפלים במקרים מיוחדים?<a class="anchor" aria-label="anchor" href="#%D7%9B%D7%99%D7%A6%D7%93-%D7%9E%D7%98%D7%A4%D7%9C%D7%99%D7%9D-%D7%91%D7%9E%D7%A7%D7%A8%D7%99%D7%9D-%D7%9E%D7%99%D7%95%D7%97%D7%93%D7%99%D7%9D"><i class="fas fa-link"></i></a>
</h4>
<p>שימו לב שבגישה הראשונה התעלמנו ממספר מצבים מיוחדים של הקלט, למשל כאשר
הקטעים הם אנכיים. נסו לבדוק בעצמכם מהם מצבי הקלט מהם אנחנו מתעלמים,
וחישבו כיצד ניתן לטפל בהם.</p>
<p>ביחידה הראשונה של הקורס דנו בנושא של מצבים מנוונים. ראינו שניתן לטפל
במצבים מנוונים על ידי חלוקה למקרים נפרדים, אך חלוקה כזו היא בדרך כלל
מתישה ומועדת לטעויות. דרך נוספת לטיפול במצבים כאלו היא למצוא מערכת
גאומטרית אחרת בה המקרים ההמיוחדים נעלמים, למשל על ידי סיבוב מערכת
הצירים, אך פעולה זו לא תמיד אפשרית. אפשרות אחרת היא להשתמש בהנחת מצב
כללי: מניחים שהקלט אינו מכיל מצבים מנוונים.</p>
<p>במקרה של חיתוך ישרים, ניתן למצוא פתרון אחר שבו המקרים המיוחדים אינם
דורשים טיפול נפרד, כמו בגישה הבאה.</p>
</div>
<div id="גישה-שניה-חישוב-דטרמיננטה" class="section level4 unnumbered">
<h4>גישה שניה: חישוב דטרמיננטה<a class="anchor" aria-label="anchor" href="#%D7%92%D7%99%D7%A9%D7%94-%D7%A9%D7%A0%D7%99%D7%94-%D7%97%D7%99%D7%A9%D7%95%D7%91-%D7%93%D7%98%D7%A8%D7%9E%D7%99%D7%A0%D7%A0%D7%98%D7%94"><i class="fas fa-link"></i></a>
</h4>
<p><img src="images/2/line-sep.jpg" align="left" width="33%"><strong>אבחנה</strong>:
הקטעים <span class="math inline">\(S\)</span> ו-<span class="math inline">\(S'\)</span> חותכים זה את זה אם ורק אם הישר <span class="math inline">\(\ell\)</span> שמכיל את <span class="math inline">\(S\)</span>
“מפריד” בין הנקודות <span class="math inline">\(p'\)</span> ו-<span class="math inline">\(q'\)</span> , והישר <span class="math inline">\(\ell'\)</span> שמכיל את <span class="math inline">\(S'\)</span> “מפריד”
בין הנקודות <span class="math inline">\(p\)</span> ו-<span class="math inline">\(q\)</span>.</p>
<p><strong>כיצד נבדוק האם ישר מפריד בין שתי נקודות?</strong> נוכל להמיר את הבעיה הזו
לבעיה הבאה: בהינתן 3 נקודות, <span class="math inline">\(a,b,c\)</span>, נרצה לדעת האם כאשר נעים מ-<span class="math inline">\(a\)</span>
ל-<span class="math inline">\(b\)</span> ואחר כך ל-<span class="math inline">\(c\)</span> מבצעים פניה ימינה, שמאלה, או שממשיכים באותו הכיוון.
<img src="images/2/left_turn.jpg" align="left" width="33%"></p>
<p>לשם כך נחשב את הדטרמיננטה הבאה:
<span class="math inline">\(det\begin{bmatrix}a_x&amp;a_y&amp;1\\b_x&amp;b_y&amp;1\\c_x&amp;c_y&amp;1\end{bmatrix}=a_xb_y+a_yc_x+b_xc_y-a_yb_x-a_xc_y-b_yc_x\)</span></p>
<p>הערך המוחלט של הדטרמיננטה הזו שווה בדיוק לפעמיים שטח המשולש
<span class="math inline">\(\triangle a b c\)</span>.</p>
<p>ערכה חיובי אם פונים שמאלה ב-<span class="math inline">\(b\)</span>, שלילי אם פונים ימינה ב-<span class="math inline">\(b\)</span>, ו-0 אם
ממשיכים באותו הכיוון.</p>
<p><img src="images/2/det.jpg" align="left" width="33%"> לכן, בשיטה זו
נוכל לבדוק האם הנקודות <span class="math inline">\(p'\)</span> ו-<span class="math inline">\(q'\)</span> נמצאות בשני צדדים שונים של הישר
<span class="math inline">\(\ell\)</span> המכיל את <span class="math inline">\(\overline{pq}\)</span>, על ידי חישוב של שתי הדטרמיננטות
המתאימות. לאחר מכן נוכל לבדוק האם הנקודות <span class="math inline">\(p\)</span> ו-<span class="math inline">\(q\)</span> נמצאות בשני צדדים
שונים של הישר <span class="math inline">\(\ell'\)</span> המכיל את <span class="math inline">\(\overline{p'q'}\)</span>.</p>
<hr class="mt-5 mb-5">
</div>
</div>
</div>
<div id="מבנה-dcel" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> מבנה DCEL<a class="anchor" aria-label="anchor" href="#%D7%9E%D7%91%D7%A0%D7%94-dcel"><i class="fas fa-link"></i></a>
</h2>
<div id="יצוג-של-מפה-מישורית" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> יצוג של מפה מישורית<a class="anchor" aria-label="anchor" href="#%D7%99%D7%A6%D7%95%D7%92-%D7%A9%D7%9C-%D7%9E%D7%A4%D7%94-%D7%9E%D7%99%D7%A9%D7%95%D7%A8%D7%99%D7%AA"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure">
<img src="images/2/thematic_map.jpg" align="left" width="33%"> בחלק
הקודם פתרנו למעשה את בעיית map overlay עבור המקרה הפשוט ביותר, שבו שתי
המפות מיוצגות כאוסף של קטעים. בחלק הזה נדבר על מפות מורכבות יותר, כאלו
שמחלקות את המישור לאיזורים (למשל, מפה המייצגת גידולים חקלאיים שונים). אך
לפני שנוכל לפתור את בעיית map overlay עבור מפות כאלו, נרצה להבין קודם
כיצד בכלל ניתן לייצג ולאחסן מפה כזאת באופן יעיל ונוח לשימוש. זהו בעצם
מבנה הנתונים הגאומטרי הראשון שנראה במהלך הקורס, והוא נקרא DCEL
(Doubly-Connected Edge List).</div>
<div id="צפו-בסרטון-הבא-2" class="section level4 unnumbered">
<h4>צפו בסרטון הבא:<a class="anchor" aria-label="anchor" href="#%D7%A6%D7%A4%D7%95-%D7%91%D7%A1%D7%A8%D7%98%D7%95%D7%9F-%D7%94%D7%91%D7%90-2"><i class="fas fa-link"></i></a>
</h4>
<p align="center" width="100%">
<iframe width="560" height="315" src="https://www.youtube.com/embed/HuT0R9LRR9M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
</p>
</div>
<div id="קראו-את-סעיף-2.2-בספר-עמודים-2933" class="section level4 unnumbered">
<h4>קראו את סעיף 2.2 בספר (עמודים 29–33)<a class="anchor" aria-label="anchor" href="#%D7%A7%D7%A8%D7%90%D7%95-%D7%90%D7%AA-%D7%A1%D7%A2%D7%99%D7%A3-2.2-%D7%91%D7%A1%D7%A4%D7%A8-%D7%A2%D7%9E%D7%95%D7%93%D7%99%D7%9D-2933"><i class="fas fa-link"></i></a>
</h4>
</div>
</div>
<div id="בעיית-map-overlay" class="section level3" number="2.3.2">
<h3>
<span class="header-section-number">2.3.2</span> בעיית map overlay<a class="anchor" aria-label="anchor" href="#%D7%91%D7%A2%D7%99%D7%99%D7%AA-map-overlay"><i class="fas fa-link"></i></a>
</h3>
<p>לאחר שראינו כיצד ניתן לייצג מפה מישורית, בחלק זה נראה כיצד ניתן לחשב את
ה-overlay של שתי מפות מישוריות. ה-overlay הוא הייצוג המאוחד של שתי שכבות
מפה כאשר הן מונחות זו על גבי זו.</p>
<p>בהינתן שתי מפות <span class="math inline">\(\mathcal{S_1}\)</span> ו-<span class="math inline">\(\mathcal{S_2}\)</span> המיוצגות על ידי מבני
DCEL, נרצה לחשב מבנה DCEL עבור ה-overlay של <span class="math inline">\(\mathcal{S_1}\)</span> ו-
<span class="math inline">\(\mathcal{S_1}\)</span>, שמסומן <span class="math inline">\(\mathcal{O}=(\mathcal{S_1},\mathcal{S_2})\)</span>.
ה-overlay הוא מפה מישורית, שבה לכל זוג פאות <span class="math inline">\(f_1\)</span> מ-<span class="math inline">\(\mathcal{S_1}\)</span>
ו-<span class="math inline">\(f_2\)</span> מ-<span class="math inline">\(\mathcal{S_2}\)</span> שהחיתוך שלהן לא ריק, קיימת פאה <span class="math inline">\(f\)</span> שהיא בדיוק
אחד מרכיבי הקשירות של <span class="math inline">\(f_1\cap f_2\)</span>. (שימו לב ש-<span class="math inline">\(f_1\)</span> או <span class="math inline">\(f_2\)</span> יכולות
להיות הפאה החיצונית שאינה חסומה). בנוסף, נרצה לסמן את הפאה <span class="math inline">\(f\)</span> בסימונים
של הפאות <span class="math inline">\(f_1\)</span> ו-<span class="math inline">\(f_2\)</span>, כמו בדוגמה הבאה:</p>
<p align="center" width="100%">
</p>
<div class="inline-figure"><img src="images/2/overlay.jpg" width="80%"></div>

<p>בפרק 2.3 של ספר הלימוד מתואר אלגוריתם MapOverlay, המחשב את
<span class="math inline">\(\mathcal{O}=(\mathcal{S_1},\mathcal{S_2})\)</span> בשיטת הישר הסורק שראינו
קודם.</p>
<div id="קראו-את-סעיף-2.3-בספר-עמודים-3339" class="section level4 unnumbered">
<h4>קראו את סעיף 2.3 בספר (עמודים 33–39)<a class="anchor" aria-label="anchor" href="#%D7%A7%D7%A8%D7%90%D7%95-%D7%90%D7%AA-%D7%A1%D7%A2%D7%99%D7%A3-2.3-%D7%91%D7%A1%D7%A4%D7%A8-%D7%A2%D7%9E%D7%95%D7%93%D7%99%D7%9D-3339"><i class="fas fa-link"></i></a>
</h4>
</div>
</div>
<div id="פעולות-בוליאניות" class="section level3" number="2.3.3">
<h3>
<span class="header-section-number">2.3.3</span> פעולות בוליאניות<a class="anchor" aria-label="anchor" href="#%D7%A4%D7%A2%D7%95%D7%9C%D7%95%D7%AA-%D7%91%D7%95%D7%9C%D7%99%D7%90%D7%A0%D7%99%D7%95%D7%AA"><i class="fas fa-link"></i></a>
</h3>
<p>אלגוריתם MapOverlay הוא כלי חזק ושימושי במגוון של בעיות. בסעיף 2.4 של
ספר הלימוד מופיעה דוגמה אחת לכך: חישוב של פעולות בוליאניות על שני
פוליגונים. בהינתן שני פוליגונים <span class="math inline">\(P_1,P_2\)</span>, האלגוריתם מאפשר לנו לחשב את
האיחוד, החיתוך, וההפרש שלהם. הרעיון הוא שלאחר חישוב ה-overlay, לכל פאה
בייצוג המאוחד יש תווית שקובעת האם פאה זו שייכת ל-<span class="math inline">\(P_1\)</span>, ל-<span class="math inline">\(P_2\)</span>, או
לשניהם. לכן בעזרת התוויות נוכל להחליט עבור כל פאה האם היא נמצאת באיחוד,
בחיתוך, או בהפרש.</p>
<div id="קראו-את-סעיף-2.4-בספר-הלימוד-עמודים-3940" class="section level4 unnumbered">
<h4>קראו את סעיף 2.4 בספר הלימוד (עמודים 39–40)<a class="anchor" aria-label="anchor" href="#%D7%A7%D7%A8%D7%90%D7%95-%D7%90%D7%AA-%D7%A1%D7%A2%D7%99%D7%A3-2.4-%D7%91%D7%A1%D7%A4%D7%A8-%D7%94%D7%9C%D7%99%D7%9E%D7%95%D7%93-%D7%A2%D7%9E%D7%95%D7%93%D7%99%D7%9D-3940"><i class="fas fa-link"></i></a>
</h4>

</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="%D7%9E%D7%91%D7%95%D7%90.html"><span class="header-section-number">1</span> מבוא</a></div>
<div class="next"><a href="%D7%A9%D7%99%D7%9C%D7%95%D7%A9%D7%99-%D7%A4%D7%95%D7%9C%D7%99%D7%92%D7%95%D7%A0%D7%99%D7%9D-%D7%95%D7%91%D7%A2%D7%99%D7%99%D7%AA-%D7%94%D7%92%D7%9C%D7%A8%D7%99%D7%94-%D7%9C%D7%90%D7%9E%D7%A0%D7%95%D7%AA.html"><span class="header-section-number">3</span> שילושי פוליגונים ובעיית הגלריה לאמנות</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D7%9E%D7%A4%D7%95%D7%AA-%D7%9E%D7%99%D7%A9%D7%95%D7%A8%D7%99%D7%95%D7%AA-%D7%95%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7"><span class="header-section-number">2</span> מפות מישוריות וטכניקת הישר הסורק</a></li>
<li>
<a class="nav-link" href="#%D7%94%D7%A7%D7%93%D7%9E%D7%94-1"><span class="header-section-number">2.1</span> הקדמה</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#%D7%A9%D7%9B%D7%91%D7%95%D7%AA-%D7%9E%D7%99%D7%93%D7%A2-%D7%91%D7%9E%D7%A4%D7%94"><span class="header-section-number">2.1.1</span> שכבות מידע במפה</a></li></ul>
</li>
<li>
<a class="nav-link" href="#%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7"><span class="header-section-number">2.2</span> טכניקת הישר הסורק</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D7%97%D7%99%D7%AA%D7%95%D7%9A-%D7%A7%D7%98%D7%A2%D7%99%D7%9D-%D7%91%D7%9E%D7%99%D7%A9%D7%95%D7%A8"><span class="header-section-number">2.2.1</span> חיתוך קטעים במישור</a></li>
<li><a class="nav-link" href="#%D7%98%D7%9B%D7%A0%D7%99%D7%A7%D7%AA-%D7%94%D7%99%D7%A9%D7%A8-%D7%94%D7%A1%D7%95%D7%A8%D7%A7---%D7%9E%D7%99%D7%9E%D7%95%D7%A9"><span class="header-section-number">2.2.2</span> טכניקת הישר הסורק - מימוש</a></li>
<li><a class="nav-link" href="#%D7%9B%D7%99%D7%A6%D7%93-%D7%A0%D7%91%D7%93%D7%95%D7%A7-%D7%94%D7%90%D7%9D-%D7%96%D7%95%D7%92-%D7%A7%D7%98%D7%A2%D7%99%D7%9D-%D7%A0%D7%97%D7%AA%D7%9B%D7%99%D7%9D"><span class="header-section-number">2.2.3</span> כיצד נבדוק האם זוג קטעים נחתכים?</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%D7%9E%D7%91%D7%A0%D7%94-dcel"><span class="header-section-number">2.3</span> מבנה DCEL</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%D7%99%D7%A6%D7%95%D7%92-%D7%A9%D7%9C-%D7%9E%D7%A4%D7%94-%D7%9E%D7%99%D7%A9%D7%95%D7%A8%D7%99%D7%AA"><span class="header-section-number">2.3.1</span> יצוג של מפה מישורית</a></li>
<li><a class="nav-link" href="#%D7%91%D7%A2%D7%99%D7%99%D7%AA-map-overlay"><span class="header-section-number">2.3.2</span> בעיית map overlay</a></li>
<li><a class="nav-link" href="#%D7%A4%D7%A2%D7%95%D7%9C%D7%95%D7%AA-%D7%91%D7%95%D7%9C%D7%99%D7%90%D7%A0%D7%99%D7%95%D7%AA"><span class="header-section-number">2.3.3</span> פעולות בוליאניות</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/02-map-overlay.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/02-map-overlay.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>גאומטריה חישובית</strong>" was written by עומרית פילצר. It was last built on 2023-08-10.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
